<!DOCTYPE html>
<html>
  <link href="{{ url_for('static', filename='detect.css') }}" rel="stylesheet">
  <head>
    <title>detect and log page</title>
    <!-- Import TensorFlow.js library -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js" type="text/javascript"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <link href="https://vjs.zencdn.net/8.5.2/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/8.5.2/video.min.js"></script>

    <script src="/static/predict.js" type="module"></script>
  </head>

  <body>

    
    <div class='left'>
        <div class='bar'>실시간 탐지 상황</div>
        <div id="cctvContainer">
          <video id="inputVideo" data-setup="{}" class="video-js" controls width="640" height="360" autoplay muted crossorigin="anonymous">
            <source src="{{ video_src }}" type="application/x-mpegURL">
          </video>
          <!-- <video id="inputVideo" controls width="550" height="400" autoplay muted crossorigin="anonymous">
            <source  src="{{ video_src }}">
          </video> -->
        </div>
        <script>

          // function addCCTVStream(url) {
          //   const cctvContainer = document.getElementById("cctvContainer");
          //   const iframe = document.createElement("iframe");
          //   iframe.src = url;
          //   iframe.width = "550";
          //   iframe.height = "400";
          //   iframe.setAttribute("allowfullscreen", "");
          //   cctvContainer.appendChild(iframe); }

          //   // 현재 페이지 URL을 가져옵니다.
          //   var currentUrl = window.location.href;

          //   // URL의 쿼리 문자열을 가져옵니다.
          //   var queryString = currentUrl.split('?')[1];

          //   // 쿼리 문자열을 파싱하여 객체로 만듭니다.
          //   var queryParams = {};
          //   queryString.split('&').forEach(function (param) {
          //       var parts = param.split('=');
          //       var key = decodeURIComponent(parts[0]);
          //       var value = decodeURIComponent(parts[1]);
          //       queryParams[key] = value;
          //   });

          //   // url 파라미터를 가져옵니다.
          //   var urlParam = queryParams['url'];

          //   addCCTVStream(urlParam);

        </script>

    </div>

    <div class='right'>

      <div class='bar'>로그</div>
      
      <table>
        <tr style='text-align: center;'>
          <td>ID</td>
          <td>날짜</td>
          <td>시간</td>
          <td>위반사항</td>
          <td>좌표</td>
        <tr>
        <tr style='text-align: center;'>
          <td>--</td>
          <td>--</td>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
      </table>

      <button class="save-button" type="button"> 영상 저장 </button>
      <button class="save-button" type="button"> 이미지 저장 </button>

    </div>
    

  </body>

</html>